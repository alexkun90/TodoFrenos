@model DAL.Models.VehicleInspection

@{
    ViewData["Title"] = "Edit";
}

<h2 class="mt-3" style="text-align:center;">Editar Inspección</h2>

<div class="container d-flex justify-content-center align-items-center mt-3 mb-5">
    <div class="card rounded-3 p-4 w-50">
        @using (Html.BeginForm("Edit", "VehicleInspections", FormMethod.Post))
        {
            @Html.HiddenFor(m => m.VehicleInspectionId)
            @Html.HiddenFor(m => m.InspectionDate)
            <input type="hidden" asp-for="VehicleId" />
            <div class="mb-3">
                <label for="UserId" class="form-label">Propietario</label>
                @Html.TextBoxFor(m => m.InspectorName, new { @class = "form-control", placeholder = "nombre del inspector", @required = "true" })
            </div>
            <div class="mb-3">
                <label for="Kilometraje" class="form-label">Kilometraje</label>
                @Html.TextBoxFor(m => m.Kilometraje, new { @class = "form-control", placeholder = "kilometraje actual del vehículo", @required = "true" })
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="control-label me-3 mb-2">Motor:</label>
                        <div class="mt-1 form-check form-check">
                            <input type="radio" asp-for="Engine" value="Sin Verificar" class="form-check-input" id="Engine1">
                            <label class="form-check-label" for="Engine1">Sin Verificar</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Engine" value="Presenta Fallos" class="form-check-input" id="Engine2">
                            <label class="form-check-label" for="Engine2">Presenta Fallos</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Engine" value="Verificado" class="form-check-input" id="Engine3">
                            <label class="form-check-label" for="Engine3">Verificado</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="control-label me-3 mb-2">Frenos</label>
                        <div class="form-check form-check ">
                            <input type="radio" asp-for="Brakes" value="Sin Verificar" class="form-check-input" id="Brakes1">
                            <label class="form-check-label" for="Brakes1">Sin Verificar</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Brakes" value="Presenta Fallos" class="form-check-input" id="Brakes2">
                            <label class="form-check-label" for="Brakes2">Presenta Fallos</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Brakes" value="Verificado" class="form-check-input" id="Brakes3">
                            <label class="form-check-label" for="Brakes3">Verificado</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="control-label me-3 mb-2">Luces</label>
                        <div class="form-check form-check ">
                            <input type="radio" asp-for="Lights" value="Sin Verificar" class="form-check-input" id="Lights1">
                            <label class="form-check-label" for="Lights1">Sin Verificar</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Lights" value="Presenta Fallos" class="form-check-input" id="Lights2">
                            <label class="form-check-label" for="Lights2">Presenta Fallos</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Lights" value="Verificado" class="form-check-input" id="Lights3">
                            <label class="form-check-label" for="Lights3">Verificado</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="control-label me-3 mb-2">Steering</label>
                        <div class="form-check form-check ">
                            <input type="radio" asp-for="Steering" value="Sin Verificar" class="form-check-input" id="Steering1">
                            <label class="form-check-label" for="Steering1">Sin Verificar</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Steering" value="Presenta Fallos" class="form-check-input" id="Steering2">
                            <label class="form-check-label" for="Steering2">Presenta Fallos</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Steering" value="Verificado" class="form-check-input" id="Steering3">
                            <label class="form-check-label" for="Steering3">Verificado</label>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="control-label me-3 mb-2">Neumáticos</label>
                        <div class="form-check form-check ">
                            <input type="radio" asp-for="Tires" value="Sin Verificar" class="form-check-input" id="Tires1">
                            <label class="form-check-label" for="Tires1">Sin Verificar</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Tires" value="Presenta Fallos" class="form-check-input" id="Tires2">
                            <label class="form-check-label" for="Tires2">Presenta Fallos</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Tires" value="Verificado" class="form-check-input" id="Tires3">
                            <label class="form-check-label" for="Tires3">Verificado</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="control-label me-3 mb-2">Suspensión</label>
                        <div class="form-check form-check ">
                            <input type="radio" asp-for="Suspension" value="Sin Verificar" class="form-check-input" id="Suspension1">
                            <label class="form-check-label" for="Suspension1">Sin Verificar</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Suspension" value="Presenta Fallos" class="form-check-input" id="Suspension2">
                            <label class="form-check-label" for="Suspension2">Presenta Fallos</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="Suspension" value="Verificado" class="form-check-input" id="Suspension3">
                            <label class="form-check-label" for="Suspension3">Verificado</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="control-label me-3 mb-2">Sistema Eléctrico</label>
                        <div class="form-check form-check ">
                            <input type="radio" asp-for="ElectricalSystem" value="Sin Verificar" class="form-check-input" id="ElectricalSystem1">
                            <label class="form-check-label" for="ElectricalSystem1">Sin Verificar</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="ElectricalSystem" value="Presenta Fallos" class="form-check-input" id="ElectricalSystem2">
                            <label class="form-check-label" for="ElectricalSystem2">Presenta Fallos</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="ElectricalSystem" value="Verificado" class="form-check-input" id="ElectricalSystem3">
                            <label class="form-check-label" for="ElectricalSystem3">Verificado</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="control-label me-3 mb-2">Cambio de Aceite</label>
                        <div class="form-check form-check ">
                            <input type="radio" asp-for="OilChange" value=1 class="form-check-input" id="oilchange1">
                            <label class="form-check-label" for="oilchange1">Si</label>
                        </div>
                        <div class="form-check form-check">
                            <input type="radio" asp-for="OilChange" value=0 class="form-check-input" id="oilchange2">
                            <label class="form-check-label" for="oilchange2">No</label>
                        </div>
                    </div>
                </div>
                <div id="extraFields" style="display: none;">
                    <div class="mb-3">
                        <label for="OilChangeKilometraje" class="form-label">Próximo Cambio</label>
                        @Html.TextBoxFor(m => m.OilChangeKilometraje, new { @class = "form-control", @type = "text", @required = "false" })
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-agree">Confirmar Cambios</button>
        }
    </div>
</div>

<script src="~/estilos/js/jquery-1.11.0.min.js"></script>
<script>
    
    history.replaceState(null, null, '@Url.Action("Index", "VehicleInspections")')

    window.addEventListener('load', function () {
        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
        }
    });

    document.addEventListener('DOMContentLoaded', function () {
        const oilChangeYes = document.getElementById('oilchange1');
        const oilChangeNo = document.getElementById('oilchange2');
        const extraFields = document.getElementById('extraFields');

        // Mostrar/Ocultar campos adicionales basado en la selección actual
        function toggleExtraFields() {
            if (oilChangeYes.checked) {
                extraFields.style.display = 'block';
            } else {
                extraFields.style.display = 'none';
            }
        }

        // Añadir eventos a los radios
        oilChangeYes.addEventListener('change', toggleExtraFields);
        oilChangeNo.addEventListener('change', toggleExtraFields);

        // Inicializar la visibilidad de los campos adicionales
        toggleExtraFields();
    }); 
</script>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
